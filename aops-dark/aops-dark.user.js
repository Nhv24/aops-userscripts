// ==UserScript==
// @name         AoPS Dark
// @match        https://artofproblemsolving.com/*
// ==/UserScript==


$(document).ready(function() {
    let dark = localStorage.getItem('dark') ? localStorage.getItem('dark') === 'true' : false;
    const styles = `.cmty-thankers{color:#bbb}.cmty-post-right,.cmty-post-wrapper,.cmty-topic-source-display{background-color:#333;color:#f5f5f5}.cmty-post-left a:not(.cmty-forum-moda):not(.cmty-forum-admina),.cmty-post-username{color:#f5f5f5}.cmty-post-target-note{background-color:#333}.cmty-post-middle{border-color:#444}.cmty-post-wrapper .cmty-avatar{box-shadow:0 0 10px 2px #d3d3d3}code.language-none{color:#333}pre:not(.pywindow.CodeMirror){filter:invert(1) hue-rotate(175deg);color:#000}.pywindow .CodeMirror{border-color:#333}.CodeMirror,.CodeMirror-activeline-background{background-color:#111}.CodeMirror-gutters{border-right:1px solid #333;background-color:transparent}.CodeMirror div.CodeMirror-cursor{border-color:#fff}.bbcode_quote,.bbcode_quote .bbcode_quote .bbcode_quote,.bbcode_quote .bbcode_quote .bbcode_quote .bbcode_quote_head,.bbcode_quote .bbcode_quote .bbcode_quote:after,.bbcode_quote .bbcode_quote_head,.bbcode_quote:after,.cmty-hide-content,.cmty-hide-content .cmty-hide-content .cmty-hide-content,.cmty-hide-content .cmty-hide-content .cmty-hide-content:after,.cmty-hide-content:after{background-color:#222;color:#fff}.bbcode_quote .bbcode_quote,.bbcode_quote .bbcode_quote .bbcode_quote_head,.bbcode_quote .bbcode_quote:after,.cmty-hide-content .cmty-hide-content,.cmty-hide-content .cmty-hide-content:after{background-color:#333;color:#fff}.bbcode_quote:before,.cmty-hide-content:before{filter:invert(.9)}.cmty-topic-mini-reply{background-color:#333}#feed-topic-list,.cmty-poll-display{background-color:#222}.cmty-topic-cell,.cmty-topic-watchers{background-color:#2d2d2d!important}.cmty-topic-cell:hover,.cmty-topic-cell:hover .cmty-topic-watchers{background-color:#333!important}.cmty-topics-list .cmty-topic-cell{border-color:#222}.cmty-topic-cell.topic-unread,.topic-unread .cmty-topic-watchers{background-color:#444!important}.cmty-topic-cell.topic-unread:hover,.cmty-topic-cell.topic-unread:hover .cmty-topic-watchers{background-color:#4e4e4e!important}#header,#main-menubar{color:#fff;background-color:#222}.menubar-label-link{color:#009fad!important}.sharedsite-wrapper{background-color:#1f1f1f}.sharedsite-wrapper .site-link{color:#fff}.sharedsite-links .site-link.selected{background-color:#444}#header:not(.shrunken-header) .dropdown-visible.site .site-link,.site-dropdown-wrapper{background-color:#555!important}.login-dropdown-divider{display:none}.login-dropdown-content{background-color:#555;border-top:2px solid #009fad}.alc-panel-headed .alc--main{background-color:#444}.alc-problem-input-bar{background-color:#666}.alc-problem-input-main .alc--main-input{background-color:gray;color:#f5f5f5}.alc-problem-input-main .alc--main-input::placeholder{color:#f5f5f5}.alc-panel-headed{box-shadow:none}.grey-panel .content{background-color:#444}.aops-panel{background-color:#333}.alc-astat-bonus-info .alc--name,.alc-astat-info .alc--name,.alc-get-started,.alc-intro-bullet-head,.alc-problem-wheel .alc--total,.alc-profile-quests-details .alc--description,.alc-profile-quests-details span.alc--label,.alc-profile-quests-details span.alc--value,.alc-profile-summary .alc--record .alc--label,.alc-rating-info .alc--name{color:#009fad}.alc-xp-display{background-color:#2d2d2d}.cmty-index-card,.cmty-page-my-aops .cmty-category-cell-heading.cmty-small-category-heading,.cmty-page-my-aops .cmty-folder-top,.cmty-user-profile-main.cmty-index-card{background-color:#333}.cmty-folder-top .cmty-small-category-heading.cmty-category-cell-heading,.cmty-my-aops-top-info,.cmty-view-folder-top .cmty-small-category-heading.cmty-category-cell-heading{background-color:transparent}.cmty-small-category-subheader{color:#ddd}.cmty-friend-box{background-color:#222}.cmty-friend-box:hover{background-color:#444}.cmty-friend-message{color:#fff}.cmty-user-profile-friends .aops-scroll-inner{border:solid #444}.cmty-contenteditable-with-placeholder:empty{border-color:#222}#variant1-container .intro-video{background-color:transparent}#variant1-container .math-category-section{filter:invert(1) hue-rotate(180deg)}#variant1-container .our-books{background:0 0}#variant1-container .blue-text{color:#009fad}#variant1-container .new-yorker-img{filter:invert(1)}#variant1-container.single-cta .online-callout{background-color:#1f1f1f}#variant1-container .callout-text{background-color:transparent}#variant1-container .staff-slider-content{background-color:transparent}#variant1-container .stacked-cards li{background-color:#222}.styles_appWrapper__CL4T8{background-image:url(https://nhv24.github.io/aops-userscripts/assets/pattern-online-gray.png)}.production{color:#fff;background-image:url(https://nhv24.github.io/aops-userscripts/assets/pattern-online-gray.png)}#grid{color:#fff}.grid-tab-panel{background-color:#333}.latex,.latexcenter{filter:invert(1)}.asy-image{background-color:#fff;border-radius:4px;padding:10px}#login-form,.aops-modal-frame,.dropzone{background-color:#222}.aops-close-x{color:#009fad}#login-form .info,#login-form-links{background-color:#222;border-color:#222}#flyout{background-color:#444}h1,h2,h3,h4,h5,h6{color:#009fad}#side-column .menu,#side-column .menu .main-option,#side-column .menu h1{background-color:#333}#side-column .menu a{color:#009fad}.school .tab-contents,.store .tab-contents{background-color:#333}.sch-carousel-outer .arrow-icon{color:#009fad}.school-quote{background-color:#1d1d1d}.faq-panel .grey-panel div.content,.instructor-row,.woot-testimonial,div.testimonial{background-color:#222}.instructor-row:hover{background:#2e2e2e}div.testimonial a{color:#ddd}.grid-tab-assignments-problem,.grid-tab-assignments-problem .problem-body .problem-block .problem-box .header{color:#fff}.grid-detail,.grid-tab-assignments div.lesson-header div.cell,.grid-tab-assignments-problem .problem-body .problem-block .problem-box.white{background-color:#444}.grid-tab-assignments-problem .problem-body{background-color:#4d4d4d}.grid-tab-assignments-problem .problem-input input[type=text]{border:none;background-color:#444}.grid-tab-assignments div.lesson-header div.cell div.inner.header{border-color:#222}.grid-detail div.body,.grid-detail div.header{border:0}.grid-detail div.header{border-bottom:1px solid #222}.lesson-selector span.lesson a{color:#fff}.grid-tab-assignments .copyright-notice{color:#eee}.grid-report-table .grid-report-row .grid-report-col-right,.grid-tab-goals .date-view div.lesson-goals-inner div.lesson-goals-inner-row:nth-child(odd) div.lesson-goals-inner-cell,table.grid-schedule tr td,table.grid-schedule tr th{background-color:#444;border-color:#333}.grid-report-table .grid-report-row:hover .grid-report-col-right,.grid-tab-goals .date-view div.lesson-goals-inner div.lesson-goals-inner-row:nth-child(even) div.lesson-goals-inner-cell,table.grid-schedule tr:nth-child(even) td,table.grid-schedule tr:nth-child(even) th{background-color:#555}.grid-report-table .grid-report-row .grid-report-col-left,.grid-tab-goals div.lesson-goals-inner div.lesson-goals-inner-row div.lesson-goals-inner-cell{border-color:#333}.problem-view-inner{background-color:#333;border-color:#444}.problem-view-inner.trigger-edit:hover{background-color:#444}.grid-tab-assignments-problem .problem-input textarea{color:#fff;background-color:#222}.DVt9Id272DsyKYi4OXVXU,.ftw-bullets,.ftw-header,.ftw-login{background-color:#222}`;
    $('.login-dropdown-content').append('<span id="toggle-mode" class="menu-item">Dark/Light</span>');
    if (dark) {
        $('head').append(`<style id="dark-styles">` + styles + `</style>`);
    }
    $('.login-dropdown-content #toggle-mode').click(() => {
        if (dark) {
            dark = false;
            $("#dark-styles").remove();
            localStorage.setItem('dark', 'false');
        }
        else {
            dark = true;
            $('head').append(`<style id="dark-styles">` + styles + `</style>`);
            localStorage.setItem('dark', 'true');
        }
    });
});
